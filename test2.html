<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faye & Yoko：深夜客房</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&family=Outfit:wght@100..900&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-soft': 'hsl(30, 40%, 97%)', 
                        'text-primary': 'hsl(28, 20%, 25%)', 
                        'text-secondary': 'hsl(20, 15%, 35%)', 
                        'accent-button': 'hsl(30, 30%, 60%)', 
                        'accent-button-hover': 'hsl(30, 30%, 45%)', 
                    },
                    fontFamily: {
                        display: ['Lora', 'serif'], 
                        body: ['"Noto Sans TC"', 'Outfit', 'sans-serif'], 
                    },
                }
            }
        }
    </script>
    <style>
        body {
            background: radial-gradient(circle at center, hsl(30, 60%, 95%) 0%, hsl(30, 40%, 90%) 100%);
            min-height: 100vh; margin: 0;
        }
        .side-bg { position: fixed; top: 0; width: 33.333333%; height: 100vh; background-size: cover; background-position: center; z-index: 0; }
        .side-bg-left { left: 0; background-image: url('https://i.meee.com.tw/368EWT3.jpg'); border-right: 1px solid rgba(255, 255, 255, 0.2); }
        .side-bg-right { right: 0; background-image: url('https://i.meee.com.tw/5f75udR.jpg'); border-left: 1px solid rgba(255, 255, 255, 0.2); }
        @media (max-width: 1024px) { .side-bg { display: none !important; } }
        
        /* 確保內容撐開，讓 footer 留在底部 */
        .page-wrapper { 
            display: flex; 
            flex-direction: column; 
            min-height: 100vh; 
            width: 100%; 
            position: relative; 
            z-index: 10; 
        }
        .main-content { flex: 1; display: flex; align-items: center; justify-content: center; padding: 2rem; }
        .glass-card { background-color: rgba(255, 255, 255, 0.45); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.4); }
        
        .footer-stats { 
            text-align: center; 
            padding: 1.5rem; 
            font-size: 0.85rem; 
            color: hsl(20, 15%, 45%); 
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(5px);
            width: 100%;
        }
    </style>
</head>
<body class="font-body text-text-primary">
    <div class="side-bg side-bg-left"></div>
    <div class="side-bg side-bg-right"></div>

    <div class="page-wrapper">
        <header class="pt-10 text-center">
            <h1 class="font-display text-5xl font-bold text-text-secondary drop-shadow-sm">Faye & Yoko</h1>
            <p class="text-lg opacity-80 italic mt-2">— 深夜客房 —</p>
        </header>

        <div class="main-content">
            <main class="w-full max-w-4xl glass-card rounded-3xl p-8 sm:p-12 shadow-xl">
                <section id="story-text" class="text-xl leading-relaxed mb-8 transition-opacity duration-500 opacity-100"></section>
                <div id="action-area" class="flex flex-col items-center gap-4">
                    <section id="choices" class="flex flex-wrap justify-center gap-4 w-full"></section>
                    <section id="navigation" class="mt-4"></section>
                </div>
            </main>
        </div>

        <footer class="footer-stats">
            <div class="max-w-xs mx-auto border-t border-gray-300/30 pt-2">
                <p>本站總瀏覽次數：<span id="view-count" class="font-bold">...</span></p>
            </div>
        </footer>
    </div>

    <script>
        // --- 全域計數器邏輯 (首頁一載入就執行) ---
        const namespace = "faye_yoko_live_stats"; // 您可以改成您在 Dashboard 設定的 Slug
        const key = "total_visits";

        function updateVisitorCount() {
            const display = document.getElementById('view-count');
            // 使用 /up 指令：每次載入網頁自動 +1 並回傳結果
            fetch(`https://api.counterapi.dev/v1/${namespace}/${key}/up`)
                .then(res => res.json())
                .then(data => {
                    display.innerText = data.count;
                })
                .catch(() => {
                    display.innerText = "連線中";
                });
        }

        // 立即執行計數
        updateVisitorCount();

        // --- 故事引擎 (這部分維持原樣，確保遊戲正常運作) ---
        const storyData = {
            "start": {
                text: "下班後的爭吵讓屋子裡的空氣凝結著冰冷的尷尬。Yoko賭氣地抱著枕頭，將自己關進了另一間客房，留下Faye獨自一人面對空蕩的雙人床。<br><br>Faye的心頭沉甸甸的，翻來覆去也睡不著。另一邊，客房裡的Yoko也並不安穩，少了身邊熟悉的體溫和Faye的輕柔擁抱，她感到一股難以言喻的空虛。習慣性的，她的手不自覺地滑向自己的肌膚，試圖尋找一絲慰藉。<br><br>接下來 Faye 該怎麼做？",
                choices: [
                    { text: "敲門，輕聲呼喚", next: "path_knock" },
                    { text: "在門外偷聽", next: "path_listen" },
                    { text: "直接闖入", next: "path_enter" }
                ]
            },
            "path_knock": {
                text: "Faye站在客房門外，輕輕敲了三下。「Yoko……妳睡了嗎？」房內的動作瞬間停了。<br><br>「……還沒。怎麼了？」門被緩緩拉開一條縫。Faye探頭進來望了望，只見Yoko露出一張被夜燈映得微紅的臉。<br><br>接下來的動作是？",
                choices: [
                    { text: "坐在床邊安撫她", next: "path_sit_bed" },
                    { text: "從背後輕輕抱住她", next: "path_hug_back" }
                ]
            },
            // ... (其他劇情資料略，請延用您手邊的完整文本)
            "path_sit_bed": { text: "妳們坐在床邊和好了。", choices: [{ text: "重回標題", next: "start" }] },
            "path_hug_back": { text: "妳們在溫暖的擁抱中入睡。", choices: [{ text: "重回標題", next: "start" }] },
            "path_listen": { text: "妳在門外聽到了不該聽的，Yoko生氣了。", choices: [{ text: "重回標題", next: "start" }] },
            "path_enter": { text: "妳直接進門，氣氛變得曖昧。", choices: [{ text: "重回標題", next: "start" }] }
        };

        let historyStack = [];

        function renderStory(segmentId, isBack = false) {
            const segment = storyData[segmentId];
            if (!segment) return;
            
            const storyTextElement = document.getElementById('story-text');
            const choicesElement = document.getElementById('choices');
            const navElement = document.getElementById('navigation');

            if (!isBack && segmentId === 'start') historyStack = [];

            storyTextElement.style.opacity = 0;
            setTimeout(() => {
                storyTextElement.innerHTML = segment.text;
                choicesElement.innerHTML = '';
                navElement.innerHTML = '';

                segment.choices.forEach(choice => {
                    const btn = document.createElement('button');
                    btn.textContent = choice.text;
                    btn.className = "bg-accent-button text-white py-3 px-8 rounded-full hover:bg-accent-button-hover transition-all min-w-[200px]";
                    btn.onclick = () => {
                        historyStack.push(segmentId);
                        renderStory(choice.next);
                    };
                    choicesElement.appendChild(btn);
                });

                if (historyStack.length > 0) {
                    const backBtn = document.createElement('button');
                    backBtn.textContent = "⬅ 回上一步";
                    backBtn.className = "text-gray-500 text-sm underline mt-4";
                    backBtn.onclick = () => renderStory(historyStack.pop(), true);
                    navElement.appendChild(backBtn);
                }
                storyTextElement.style.opacity = 1;
            }, 300);
        }

        renderStory('start');
    </script>
</body>
</html>
